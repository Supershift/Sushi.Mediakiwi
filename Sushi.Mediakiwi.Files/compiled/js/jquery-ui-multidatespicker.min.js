!function(a){a.extend(a.ui,{multiDatesPicker:{version:"1.6.4"}}),a.fn.multiDatesPicker=function(b){function c(a,b){b||(b="picked"),a=g.call(this,a);for(var c=0;c<this.multiDatesPicker.dates[b].length;c++)if(!k.compareDates(this.multiDatesPicker.dates[b][c],a))return this.multiDatesPicker.dates[b].splice(c,1).pop()}function d(a,b){return b||(b="picked"),this.multiDatesPicker.dates[b].splice(a,1).pop()}function e(a,b,c){b||(b="picked"),a=g.call(this,a),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),k.gotDate.call(this,a,b)===!1&&(this.multiDatesPicker.dates[b].push(a),c||this.multiDatesPicker.dates[b].sort(k.compareDates))}function f(a){a||(a="picked"),this.multiDatesPicker.dates[a].sort(k.compareDates)}function g(a,b,c){return b||(b="object"),k.dateConvert.call(this,a,b,c)}var h=arguments,i=this,j=(new Date,new Date(0),{}),k={init:function(b){var c=a(this);this.multiDatesPicker.changed=!1;var d={beforeShow:function(a,b){this.multiDatesPicker.changed=!1,this.multiDatesPicker.originalBeforeShow&&this.multiDatesPicker.originalBeforeShow.call(this,a,b)},onSelect:function(b,c){var d=a(this);if(this.multiDatesPicker.changed=!0,b&&(d.multiDatesPicker("toggleDate",b),this.multiDatesPicker.changed=!0),"normal"==this.multiDatesPicker.mode&&this.multiDatesPicker.pickableRange)if(this.multiDatesPicker.dates.picked.length>0){var e=this.multiDatesPicker.dates.picked[0],f=new Date(e.getTime());if(k.sumDays(f,this.multiDatesPicker.pickableRange-1),this.multiDatesPicker.adjustRangeToDisabled){var g,h=this.multiDatesPicker.dates.disabled.slice(0);do{g=0;for(var i=0;i<h.length;i++)h[i].getTime()<=f.getTime()&&(e.getTime()<=h[i].getTime()&&h[i].getTime()<=f.getTime()&&g++,h.splice(i,1),i--);f.setDate(f.getDate()+g)}while(0!=g)}this.multiDatesPicker.maxDate&&f>this.multiDatesPicker.maxDate&&(f=this.multiDatesPicker.maxDate),d.datepicker("option","minDate",e).datepicker("option","maxDate",f)}else d.datepicker("option","minDate",this.multiDatesPicker.minDate).datepicker("option","maxDate",this.multiDatesPicker.maxDate);this.multiDatesPicker.originalOnSelect&&b&&this.multiDatesPicker.originalOnSelect.call(this,b,c)},beforeShowDay:function(b){var c=a(this),d=c.multiDatesPicker("gotDate",b)!==!1,e=c.datepicker("option","disabled"),f=c.multiDatesPicker("gotDate",b,"disabled")!==!1,g=this.multiDatesPicker.maxPicks<=this.multiDatesPicker.dates.picked.length,h=[!0,"",null];return this.multiDatesPicker.originalBeforeShowDay&&(h=this.multiDatesPicker.originalBeforeShowDay.call(this,b)),h[1]=d?"ui-state-highlight "+h[1]:h[1],h[0]=h[0]&&!(e||f||g&&!h[1]),h}};if(c.val())var e=c.val();b?(b.separator&&(this.multiDatesPicker.separator=b.separator),this.multiDatesPicker.separator||(this.multiDatesPicker.separator=", "),this.multiDatesPicker.originalBeforeShow=b.beforeShow,this.multiDatesPicker.originalOnSelect=b.onSelect,this.multiDatesPicker.originalBeforeShowDay=b.beforeShowDay,this.multiDatesPicker.originalOnClose=b.onClose,c.datepicker(b),this.multiDatesPicker.minDate=a.datepicker._determineDate(this,b.minDate,null),this.multiDatesPicker.maxDate=a.datepicker._determineDate(this,b.maxDate,null),b.addDates&&k.addDates.call(this,b.addDates),b.addDisabledDates&&k.addDates.call(this,b.addDisabledDates,"disabled"),k.setMode.call(this,b)):c.datepicker(),c.datepicker("option",d),e&&c.multiDatesPicker("value",e);var f=c.multiDatesPicker("value");c.val(f);var g=c.datepicker("option","altField");g&&a(g).val(f),c.datepicker("refresh")},compareDates:function(a,b){a=g.call(this,a),b=g.call(this,b);var c=a.getFullYear()-b.getFullYear();return c||(c=a.getMonth()-b.getMonth(),c||(c=a.getDate()-b.getDate())),c},sumDays:function(a,b){var c=typeof a;return obj_date=g.call(this,a),obj_date.setDate(obj_date.getDate()+b),g.call(this,obj_date,c)},dateConvert:function(b,c,d){var e=typeof b,f=a(this);if(e==c){if("object"==e)try{b.getTime()}catch(g){return a.error("Received date is in a non supported format!"),!1}return b}if("undefined"==typeof b&&(b=new Date(0)),"string"!=c&&"object"!=c&&"number"!=c&&a.error('Date format "'+c+'" not supported!'),!d){var h=f.datepicker("option","dateFormat");d=h?h:a.datepicker._defaults.dateFormat}switch(e){case"object":break;case"string":b=a.datepicker.parseDate(d,b);break;case"number":b=new Date(b);break;default:a.error('Conversion from "'+c+'" format not allowed on jQuery.multiDatesPicker')}switch(c){case"object":return b;case"string":return a.datepicker.formatDate(d,b);case"number":return b.getTime();default:a.error('Conversion to "'+c+'" format not allowed on jQuery.multiDatesPicker')}return!1},gotDate:function(a,b){b||(b="picked");for(var c=0;c<this.multiDatesPicker.dates[b].length;c++)if(0===k.compareDates.call(this,this.multiDatesPicker.dates[b][c],a))return c;return!1},value:function(a){if(!a||"string"!=typeof a){var b=k.getDates.call(this,"string");return b.length?b.join(this.multiDatesPicker.separator):""}k.addDates.call(this,a.split(this.multiDatesPicker.separator))},getDates:function(b,c){switch(b||(b="string"),c||(c="picked"),b){case"object":return this.multiDatesPicker.dates[c];case"string":case"number":var d=new Array;for(var e in this.multiDatesPicker.dates[c])d.push(g.call(this,this.multiDatesPicker.dates[c][e],b));return d;default:a.error('Format "'+b+'" not supported!')}},addDates:function(b,c){if(b.length>0)switch(c||(c="picked"),typeof b){case"object":case"array":if(b.length){for(var d=0;d<b.length;d++)e.call(this,b[d],c,!0);f.call(this,c);break}case"string":case"number":e.call(this,b,c);break;default:a.error('Date format "'+typeof b+'" not allowed on jQuery.multiDatesPicker')}else a.error("Empty array of dates received.")},removeDates:function(a,b){b||(b="picked");var d=[];if("[object Array]"===Object.prototype.toString.call(a))for(var e in a.sort(function(a,b){return b-a}))d.push(c.call(this,a[e],b));else d.push(c.call(this,a,b));return d},removeIndexes:function(a,b){b||(b="picked");var c=[];if("[object Array]"===Object.prototype.toString.call(a))for(var e in a.sort(function(a,b){return b-a}))c.push(d.call(this,a[e],b));else c.push(d.call(this,a,b));return c},resetDates:function(a){a||(a="picked"),this.multiDatesPicker.dates[a]=[]},toggleDate:function(a,b){switch(b||(b="picked"),this.multiDatesPicker.mode){case"daysRange":this.multiDatesPicker.dates[b]=[];var c=this.multiDatesPicker.autoselectRange[1],d=this.multiDatesPicker.autoselectRange[0];d>c&&(c=this.multiDatesPicker.autoselectRange[0],d=this.multiDatesPicker.autoselectRange[1]);for(var e=d;c>e;e++)k.addDates.call(this,k.sumDays.call(this,a,e),b);break;default:k.gotDate.call(this,a)===!1?k.addDates.call(this,a,b):k.removeDates.call(this,a,b)}},setMode:function(b){a(this);switch(b.mode&&(this.multiDatesPicker.mode=b.mode),this.multiDatesPicker.mode){case"normal":for(option in b)switch(option){case"maxPicks":case"minPicks":case"pickableRange":case"adjustRangeToDisabled":this.multiDatesPicker[option]=b[option]}break;case"daysRange":case"weeksRange":var c=1;for(option in b)switch(option){case"autoselectRange":c--;case"pickableRange":case"adjustRangeToDisabled":this.multiDatesPicker[option]=b[option]}c>0&&a.error("Some mandatory options not specified!")}j.onSelect&&j.onSelect()},destroy:function(){this.multiDatesPicker=null,a(this).datepicker("destroy")}};return this.each(function(){var c=a(this);if(this.multiDatesPicker||(this.multiDatesPicker={dates:{picked:[],disabled:[]},mode:"normal",adjustRangeToDisabled:!0}),k[b]){var d=k[b].apply(this,Array.prototype.slice.call(h,1));switch(b){case"removeDates":case"removeIndexes":case"resetDates":case"toggleDate":case"addDates":var e=c.datepicker("option","altField"),f=k.value.call(this);void 0!==e&&""!=e&&a(e).val(f),c.val(f),a.datepicker._refreshDatepicker(this)}switch(b){case"removeDates":case"getDates":case"gotDate":case"sumDays":case"compareDates":case"dateConvert":case"value":i=d}return d}return"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on jQuery.multiDatesPicker"),!1):k.init.apply(this,h)}),i};var b=(new Date).getTime();a.multiDatesPicker={version:!1},a.multiDatesPicker.initialized=!1,a.multiDatesPicker.uuid=(new Date).getTime(),a.multiDatesPicker.version=a.ui.multiDatesPicker.version,a.multiDatesPicker._hideDatepicker=a.datepicker._hideDatepicker,a.datepicker._hideDatepicker=function(){var b=this._curInst.input[0],c=b.multiDatesPicker;return!c||this._curInst.inline===!1&&!c.changed?a.multiDatesPicker._hideDatepicker.apply(this,arguments):(c.changed=!1,void a.datepicker._refreshDatepicker(b))},window["DP_jQuery_"+b]=a}(jQuery);