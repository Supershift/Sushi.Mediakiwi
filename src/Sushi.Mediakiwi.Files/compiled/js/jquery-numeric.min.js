!function(a){a.fn.numeric=function(b,c){"boolean"==typeof b&&(b={decimal:b}),b=b||{},"undefined"==typeof b.negative&&(b.negative=!0);var d=b.decimal===!1?"":b.decimal||".",e=b.negative===!0?!0:!1,c="function"==typeof c?c:function(){};return this.data("numeric.decimal",d).data("numeric.negative",e).data("numeric.callback",c).keypress(a.fn.numeric.keypress).keyup(a.fn.numeric.keyup).blur(a.fn.numeric.blur)},a.fn.numeric.keypress=function(b){var c=a.data(this,"numeric.decimal"),d=a.data(this,"numeric.negative"),e=b.charCode?b.charCode:b.keyCode?b.keyCode:0;if(13==e&&"input"==this.nodeName.toLowerCase())return!0;if(13==e)return!1;var f=!1;if(b.ctrlKey&&97==e||b.ctrlKey&&65==e)return!0;if(b.ctrlKey&&120==e||b.ctrlKey&&88==e)return!0;if(b.ctrlKey&&99==e||b.ctrlKey&&67==e)return!0;if(b.ctrlKey&&122==e||b.ctrlKey&&90==e)return!0;if(b.ctrlKey&&118==e||b.ctrlKey&&86==e||b.shiftKey&&45==e)return!0;if(48>e||e>57){if(0!=this.value.indexOf("-")&&d&&45==e&&(0==this.value.length||0==a.fn.getSelectionStart(this)))return!0;c&&e==c.charCodeAt(0)&&-1!=this.value.indexOf(c)&&(f=!1),8!=e&&9!=e&&13!=e&&35!=e&&36!=e&&37!=e&&39!=e&&46!=e?f=!1:"undefined"!=typeof b.charCode&&(b.keyCode==b.which&&0!=b.which?(f=!0,46==b.which&&(f=!1)):0!=b.keyCode&&0==b.charCode&&0==b.which&&(f=!0)),c&&e==c.charCodeAt(0)&&(f=-1==this.value.indexOf(c)?!0:!1)}else f=!0;return f},a.fn.numeric.keyup=function(b){var c=this.value;if(c.length>0){var d=a.fn.getSelectionStart(this),e=a.data(this,"numeric.decimal"),f=a.data(this,"numeric.negative");if(""!=e){var g=c.indexOf(e);0==g&&(this.value="0"+c),1==g&&"-"==c.charAt(0)&&(this.value="-0"+c.substring(1)),c=this.value}for(var h=[0,1,2,3,4,5,6,7,8,9,"-",e],i=c.length,j=i-1;j>=0;j--){var k=c.charAt(j);0!=j&&"-"==k?c=c.substring(0,j)+c.substring(j+1):0!=j||f||"-"!=k||(c=c.substring(1));for(var l=!1,m=0;m<h.length;m++)if(k==h[m]){l=!0;break}l&&" "!=k||(c=c.substring(0,j)+c.substring(j+1))}var n=c.indexOf(e);if(n>0)for(var j=i-1;j>n;j--){var k=c.charAt(j);k==e&&(c=c.substring(0,j)+c.substring(j+1))}this.value=c,a.fn.setSelection(this,d)}},a.fn.numeric.blur=function(){var b=a.data(this,"numeric.decimal"),c=a.data(this,"numeric.callback"),d=this.value;if(""!=d){var e=new RegExp("^\\d+$|\\d*"+b+"\\d+");e.exec(d)||c.apply(this)}},a.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).unbind("keypress",a.fn.numeric.keypress).unbind("blur",a.fn.numeric.blur)},a.fn.getSelectionStart=function(a){if(a.createTextRange){var b=document.selection.createRange().duplicate();return b.moveEnd("character",a.value.length),""==b.text?a.value.length:a.value.lastIndexOf(b.text)}return a.selectionStart},a.fn.setSelection=function(a,b){if("number"==typeof b&&(b=[b,b]),b&&b.constructor==Array&&2==b.length)if(a.createTextRange){var c=a.createTextRange();c.collapse(!0),c.moveStart("character",b[0]),c.moveEnd("character",b[1]),c.select()}else a.setSelectionRange&&(a.focus(),a.setSelectionRange(b[0],b[1]))}}(jQuery);