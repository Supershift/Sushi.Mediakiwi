!function(a){function b(a,b){return b.measureText(a).width}function c(a,b){return b.text(a),b.width()}var d,e,f,g=!1;a.fn.shorten=function(){var g={},h=arguments,i=h.callee;if(h.length)if(h[0].constructor==Object)g=h[0];else{if("options"==h[0])return a(this).eq(0).data("shorten-options");g={width:parseInt(h[0]),tail:h[1]}}this.css("visibility","hidden");var j=a.extend({},i.defaults,g);return this.each(function(){var h,k=a(this),l=k.text(),m=l.length,n=a("<span/>").html(j.tail).text(),o={shortened:!1,textOverflow:!1};if(h="none"!=k.css("float")?j.width||k.width():j.width||k.parent().width(),0>h)return!0;if(k.data("shorten-options",j),this.style.display="block",this.style.whiteSpace="nowrap",d){var p=a(this),q=document.createElement("canvas");ctx=q.getContext("2d"),p.html(q),ctx.font=p.css("font-style")+" "+p.css("font-variant")+" "+p.css("font-weight")+" "+Math.ceil(parseFloat(p.css("font-size")))+"px "+p.css("font-family"),e=ctx,f=b}else p=a('<table style="padding:0; margin:0; border:none; font:inherit;width:auto;zoom:1;position:absolute;"><tr style="padding:0; margin:0; border:none; font:inherit;"><td style="padding:0; margin:0; border:none; font:inherit;white-space:nowrap;"></td></tr></table>'),$td=a("td",p),a(this).html(p),e=$td,f=c;if(p=f.call(this,l,e),h>p)return k.text(l),this.style.visibility="visible",k.data("shorten-info",o),!0;if(j.tooltip&&(this.setAttribute("title",l),this.setAttribute("class","dot")),i._native&&!g.width&&(q=a("<span>"+j.tail+"</span>").text(),1==q.length&&8230==q.charCodeAt(0)))return k.text(l),this.style.overflow="hidden",this.style[i._native]="ellipsis",this.style.visibility="visible",o.shortened=!0,o.textOverflow="ellipsis",k.data("shorten-info",o),!0;n=f.call(this,n,e),h-=n,n=1.15*h,p-n>0&&(n=l.substring(0,Math.ceil(m*(n/p))),f.call(this,n,e)>h&&(l=n,m=l.length));do m--,l=l.substring(0,m);while(f.call(this,l,e)>=h);return k.html(a.trim(a("<span/>").text(l).html())+j.tail),this.style.visibility="visible",o.shortened=!0,k.data("shorten-info",o),!0})};var h=document.documentElement.style;"textOverflow"in h?g="textOverflow":"OTextOverflow"in h&&(g="OTextOverflow"),"undefined"!=typeof Modernizr&&Modernizr.canvastext?d=Modernizr.canvastext:(h=document.createElement("canvas"),d=!(!h.getContext||!h.getContext("2d")||"function"!=typeof h.getContext("2d").fillText)),a.fn.shorten._is_canvasTextSupported=d,a.fn.shorten._native=g,a.fn.shorten.defaults={tail:"&hellip;",tooltip:!0}}(jQuery);