function SetClick(a){if("nopt"!=$(a).attr("class")){var b=$(a).parent("tr").attr("id");null!=b&&($("div#loader").fadeIn(3e3),location.href=document.URL.split("#")[0]+"&item="+b.split("_")[1]);var c=$(a).parent("tr").find("td:first").find("input:first");if(null!=c){var d=c.attr("id"),e=c.attr("value"),f=d+"|"+e;if(c.attr("checked",!0),$(a).parent("tr").attr("class","selected"),null!=e&&null!=d){var g=getUrlVars().referid,h=g.substring(1,g.length)+"$"+d,i="#"+g,j=parent.$(i).attr("class").indexOf("single");j>-1&&parent.$(i+" li").remove(),parent.$(i).append('<li class="ui-state-default">'+e+'<a class="del"></a> <input type="hidden" id="'+h+'" name="'+h+'" value="'+f+'" /> </li>'),j>-1&&parent.$.fn.colorbox.close()}}}}function getUrlVars(){for(var a,b=[],c=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),d=0;d<c.length;d++){var a=c[d].split("=");b.push(a[0]),b[a[0]]=a[1]}return b}var uri=null;$(document).ready(function(){$(".numeric").numeric({negative:!1})});var dataModel=function(){this.items=ko.observableArray([]),this.total=ko.observableArray([]),this.pages=ko.observableArray([]),this.all=ko.observable(!0),this.set=ko.observable(!0),this.max=ko.observable(!0),this.nfo=ko.observable(!0),this.Max=0,this.url=null;var a=this;$(".pager").bind("click",function(){var b=$(this).html();b="&lt;"==b?parseInt($("#set").val())-1:"&gt;"==b?parseInt($("#set").val())+1:parseInt(b),uri=window.location.toString().split("?")[0]+"?";for(var c=window.location.search.split(/\?|&/),d=0;d<c.length;d++)if(c[d]){var e=c[d].split(/=/);"set"==e[0]&&(e[1]=b),uri+=(1==d?"":"&")+e[0]+"="+e[1]}return a.Max<b?($("#set").val(a.Max),!1):1>b?($("#set").val(1),!1):($("#set").val(b),uri+="&JSON=1",a.load(),!1)}),this.load=function(){if(a.url=uri,null!=a.url){$("div#loader").fadeIn(1e3);var b=$(document.forms[0]),c=b.serializeArray();$.post(a.url,c,function(b){a.items().length>0&&a.items.removeAll();for(var c=0;c<b.Rows.length;c++)a.items.push(b.Rows[c]);if(a.total.removeAll(),null!=b.Sum&&a.total.push(b.Sum),null!=b.Pages){a.pages().length>0&&a.pages.removeAll();for(var c=0;c<b.Pages.length;c++)a.pages.push(b.Pages[c])}a.all(b.All),a.set(b.Set),a.max(b.Max),a.Max=b.Max;var d=b.Set*b.Lst,e=d-b.Lst+1;d>b.Tot&&(d=b.Tot),a.nfo("Showing "+e+" - "+d+" of "+b.Tot+" items"),$("div#loader").stop(),$("div#loader").fadeOut("fast"),0==a.items().length?$("#grid").hide():$("#grid").show(),$(".dataBlock table td").click(function(){SetClick(this)}),$(".dataBlock table tr td a").each(function(){$(this).parent().addClass("nopt")})})}}};ko.bindingHandlers.stripe={update:function(a,b,c){var d=(ko.utils.unwrapObservable(b()),c()),e=d.evenClass,f=d.oddClass;$(a).children(":nth-child(odd)").addClass(f).removeClass(e),$(a).children(":nth-child(even)").addClass(e).removeClass(f)}},$(document).ready(function(){$(".ui-tabs-nav").find(".ui-tabs-selected"),$(".multiSelectLeft, .multiSelectRight").sortable({connectWith:".connectedMultiselect"}).disableSelection(),$(".multiSelectLeft li a.move").live("click",function(){var a=$(this).parent(),b=a.clone();b.appendTo(".multiSelectRight"),a.remove()}),$(".multiSelectLeft li").live("dblclick",function(){var a=$(this).clone();a.appendTo(".multiSelectRight"),$(this).remove()}),$(".multiSelectRight li a.move").live("click",function(){var a=$(this).parent(),b=a.clone();b.appendTo(".multiSelectLeft"),a.remove()}),$(".multiSortable li a.del").live("click",function(){var a=$(this).parent();a.clone();a.remove()}),$(".connectedSortable").sortable({connectWith:".connectedSortable"}).disableSelection(),$(".datepicker").datepicker(),$(".timepicker").timepicker({}),$("tr.parent").hover(function(){var a=$(this),b=a.find("a.open"),c=a.siblings(".child-"+this.id);b.css("cursor","pointer").attr("title","Click to expand/collapse"),b.click(function(){c.toggle(),c.toggleClass("activeSub"),a.toggleClass("active"),b.toggleClass("close")})}),$("tr[class^=child]").hide().children("td"),$(".checkbox").change(function(){$(this).closest("tr").toggleClass("active",this.checked)}),$(".pop").colorbox({iframe:!0,width:"750px",height:"600px",transition:"none",scrolling:!1}),$(".pop1").colorbox({iframe:!0,width:"864px",height:"614px",transition:"none"}),$(".pop2").colorbox({iframe:!0,width:"864px",height:"614px",transition:"none",scrolling:!1}),$(".pop3").colorbox({iframe:!0,width:"425px",height:"212px",transition:"none",scrolling:!1}),$(".pop4").colorbox({iframe:!0,width:"425px",height:"346px",transition:"none",scrolling:!1}),$(".pop5").colorbox({iframe:!0,width:"425px",height:"410px",transition:"none",scrolling:!1}),$(".post").click(function(){var a=$(this).get(0).tagName.toLowerCase(),b=$(this).get(0).type.toLowerCase();"select"==a||"text"==a||"input"==a&&"submit"!=b||$("#autopostback").val($(this).attr("id"))}),$(".post").change(function(){var a=$(this).get(0).tagName.toLowerCase();("select"==a||"text"==a||"input"==a)&&$("#autopostback").val($(this).attr("id"))}),$(".postBack").click(function(){var a=$(this).get(0).tagName.toLowerCase(),b=$(this).get(0).type.toLowerCase();"select"==a||"text"==a||"input"==a&&"submit"!=b||($("#autopostback").val($(this).attr("id")),$("div#loader").fadeIn(1e3),document.forms[0].submit())}),$(".postBack").change(function(){var a=$(this).get(0).tagName.toLowerCase();("select"==a||"text"==a||"input"==a)&&($("#autopostback").val($(this).attr("id")),$("div#loader").fadeIn(1e3),document.forms[0].submit())}),$(".postparent").each(function(){var a=$(this).attr("id"),b=$(this).attr("value"),c=a+"|"+b,d=getUrlVars().referid,e=d.substring(1,d.length)+"$"+a,f="#"+d,g=parent.$(f).attr("class").indexOf("single");g>-1&&parent.$(f+" li").remove(),parent.$(f).append('<li class="ui-state-default">'+b+'<a class="del"></a> <input type="hidden" id="'+e+'" name="'+e+'" value="'+c+'" /> </li>'),g>-1&&parent.$.fn.colorbox.close()}),$(".dataBlock table td").click(function(){SetClick(this)});var a=function(a,b){return b.children().each(function(){$(this).width($(this).width())}),b};$(".scroll tbody").sortable({helper:a}).disableSelection(),$(function(){$("abbr").tipTip({maxWidth:"auto",edgeOffset:10})}),$("#sortable1, #sortable2, #sortable3, #sortable4, #sortable5, #sortable6").sortable({connectWith:".connectedSortable"}).disableSelection();var b=new dataModel;ko.applyBindings(b),b.load()});