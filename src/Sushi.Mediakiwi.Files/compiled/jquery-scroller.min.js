!function(a){String.prototype.endsWith=function(a){return-1!==this.indexOf(a,this.length-a.length)};var b={reset:function(){var b=a(this);return b.find("ul").css({left:0}),b},forceResize:function(){var b=a(this),d=b.width();return settings=b.data("scroller"),totalwidth=0,"auto"==settings.space&&(space=c.getSpacing(b)),b.find("ul").find("li").each(function(){totalwidth+=a(this).outerWidth(!0)+space}),totalwidth+=space,totalwidth>d&&(d=totalwidth),b.find("ul").css({width:d}),b},repositionButton:function(){var b=a(this),d=b.data("scroller"),e=(d.space,b.parent()),f=e.find(b).index(b.context),g=(b.find("ul"),b.position()),h=g.top;return""!=b.selector&&b.selector&&(f=e.find(b).index(b.selector)),"auto"==d.space&&c.getSpacing(a(this)),e.find(".scroller-button:eq("+f+")").css({top:h}),e.find(".scroller-button.scroll-right:eq("+f+")").css({top:h}),b},getLast:function(){return c.getLast(a(this)),a(this).data("lastvisible")},getFirst:function(){return c.getFirst(a(this)),a(this).data("firstvisible")},isOver:function(){return c.overflow(a(this))},isUnder:function(){return c.underflow(a(this))},refit:function(){var b=a(this),d=a(this).data("scroller"),e=d.space;return"auto"==d.space&&(e=c.getSpacing(b)),c.realign(b.data("scroller").selection,b,e),b},resize:function(){return a(this).each(function(){var d=a(this),e=d.data("scroller"),f=e.space,g=d.data("oldwidth"),h=d.width(),i=0;if("auto"==e.space&&(f=c.getSpacing(d)),d.find("ul").find("li").each(function(){i+=a(this).outerWidth(!0)+f}),g>h&&(h=g),i>h&&(h=i),h-=c.toPixels(a(this).find("ul").css("paddingLeft"))+c.toPixels(a(this).find("ul").css("paddingRight")),h+=f,d.find("ul").css({width:h}),d.data("newwidth")){var j=d.data("newwidth");d.data("oldwidth",j)}d.data("newwidth",h),b.repositionButton.call(this),b.refit.call(this)})},update:function(){var d=0,e=a(this),f=e.data("scroller"),g=e.find("ul"),h=f.space,i=g.width();return"auto"==f.space&&(h=c.getSpacing(e)),g.find("li").each(function(){d+=a(this).outerWidth(!0)+h}),d+=h,d>i&&g.css({width:d}),b.repositionButton.call(this),e},init:function(d){var e=a.extend({},a.fn.scroller.defaults,d);return a(this).each(function(){var d=a(this);if(d.addClass("scroll-view"),(!a.isNumeric(e.proportion)||e.proportion>1)&&(e.proportion=c.toPercent(e.proportion,d)),d.data("scroller",e),d.data("scroll-initialized"))return!1;var f=(d.height(),d.position().top),g=d.find("ul"),h=e.space;d.data("oldwidth",d.width()),d.data("scroll-initialized",!0),"auto"==e.space&&(h=c.getSpacing(d));var i=0,j=g.find("li:first").outerHeight(!0)+c.toPixels(d.find("ul").css("paddingTop")),k=(g.width(),d.parent()),l=(1-e.proportion)/2*100,m=e.bspace,n=100*e.proportion-2*m;"absoluteTop"==e.background.position&&k.parent()&&(i=c.toPixels(k.parent().css("paddingTop"))),g.css({position:"relative",left:h,height:g.height()}),b.resize.call(this),d.css({width:n+"%",left:l+m+"%"}).after("<button  class='scroller-button scroll-right' style='position:absolute;width:"+l+"%;height:"+j+"px;left:"+(l+2*m+n)+"%;top:"+f+"px;z-index:999;margin:0px;padding:0px'></button>").before("<button  class='scroller-button scroll-left' style='position:absolute;width:"+l+"%;height:"+j+"px;left:0px;top:"+f+"px;z-index:999;margin:0px;padding:0px'></button>");var o=k.find(".scroll-right"),p=k.find(".scroll-left");if("ui"==e.html){p.button({icons:{primary:"ui-icon-carat-1-w"},text:!1}),o.button({icons:{primary:"ui-icon-carat-1-e"},text:!1});var q=c.toPixels(k.css("paddingTop"));""==e.background.css?d.parent().append("<div class='scroller-background' style='background-image:"+g.css("background-image")+";background-color:"+g.css("background-color")+";height:"+(d.outerHeight()+q+f)+"px;top:"+(g.position().top-i)+"px'></div>"):a("<div class='scroller-background' style='background-image:"+g.css("background-image")+";background-color:"+g.css("background-color")+";height:"+(d.outerHeight()+q+f)+"px;top:"+(g.position().top-i)+"px'></div>").appendTo(k).css(e.background.css),g.css({background:"none","border-top":"none","border-left":"none","border-right":"none"}),p.css({"margin-right":0,"margin-left":0}),o.css({"margin-right":0,"margin-right":0})}else""!=e.html&&(p.html(e.html.buttonLeft),o.html(e.html.buttonRight));p.click(function(){c.getFirst(d);var a=g.position().left,b=d.data("firstvisible"),e=b.prev(),f=a,i=c.getPadding(d);c.underflow(d)&&(f=a+(d.offset().left-b.offset().left+h),f+=i.left),c.underflow(d)&&(f+=e.width()/2),g.css({left:f})}),o.click(function(){c.getLast(d);var a=g.position().left,b=a,e=d.data("lastvisible"),f=e.next(),i=c.getPadding(d);c.overflow(d)&&(b=a-(e.offset().left-d.offset().left+e.outerWidth()+h-d.width()),b-=i.right),c.overflow(d)&&(b-=f.width()/2),g.css({left:b})})})}},c={rgb2hex:function(a){function b(a){return("0"+parseInt(a).toString(16)).slice(-2)}return a=a.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),"#"+b(a[1])+b(a[2])+b(a[3])},getPadding:function(a){var b,d,e=a.find("ul"),f=new Object,g=e.css("paddingLeft"),h=e.css("paddingRight");return b=c.toPixels(g,a),d=c.toPixels(h,a),f.left=b,f.right=d,f},toPixels:function(a,b){return a=String(a),a.endsWith("%")?size=parseInt(a.slice(0,-1))*b.parent().width()/100:a.endsWith("px")?size=parseInt(a.slice(0,-2)):a.endsWith("em")?size=10*parseInt(a.slice(0,-1)):size=1*a,size},toPercent:function(a,b){return c.toPixels(a,b)/b.parent().width()},getSpacing:function(a){var b=a.find("ul").find("li:first");return b.innerWidth()-b.width()+b.outerWidth()-b.innerWidth()},realign:function(a,b,d){var e=b.find("ul"),f=e.find(a);if(b.data("started")||e.css({left:0}),c.overflow(b)){b.data("started",!0),f.length<1&&(c.getLast(b),b.data("lastvisible"),f=e.find(b.data("lastvisible")));var g=f.offset().left,h=f.width(),i=b.offset().left,j=b.width(),k=f.next(),l=c.getPadding(b);g+h>i+j?(left=g-(i+j)+h+d,left+=l.right,e.css({left:-left}),c.overflow(b)&&(left+=k.width()/2+d),e.css({left:-left}),b.data("started",!1)):b.data("started",!1)}else b.data("started",!1)},overflow:function(a){var b=!1,c=a.find("ul");return c.width()+c.position().left>a.width()&&(b=!0),b},underflow:function(a){var b=!1;return a.find("ul").offset().left<a.offset().left&&(b=!0),b},getLast:function(b){b.find("li").each(function(){if(a(this).offset().left>b.width()+b.offset().left)return!1;b.data("lastvisible",a(this))})},getFirst:function(b){b.find("li").each(function(){if(a(this).offset().left+a(this).width()>b.offset().left)return b.data("firstvisible",a(this)),!1})}};a.fn.scroller=function(){return method=arguments[0],b[method]?(method=b[method],arguments=Array.prototype.slice.call(arguments,1)):method=b.init,method.apply(this,arguments)},a.fn.scroller.defaults={proportion:.93,bspace:0,space:"auto",selection:"li[aria-selected=true]",html:"ui",background:{position:"",css:""}}}(jQuery);