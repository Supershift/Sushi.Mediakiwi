tinymce.PluginManager.add("link",function(n){function i(t){return function(){var i=n.settings.link_list;typeof i=="string"?tinymce.util.XHR.send({url:i,success:function(n){t(tinymce.util.JSON.parse(n))}}):typeof i=="function"?i(t):t(i)}}function r(n,t,i){function r(n,i){return i=i||[],tinymce.each(n,function(n){var u={text:n.text||n.title};n.menu?u.menu=r(n.menu):(u.value=n.value,t&&t(u));i.push(u)}),i}return r(n,i||[])}function t(){showLink();return;var t,s,u,i,h,f,e,o}n.addButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onclick:i(t),stateSelector:"a[href]"});n.addButton("unlink",{icon:"unlink",tooltip:"Remove link",cmd:"unlink",stateSelector:"a[href]"});n.addShortcut("Meta+K","",i(t));n.addCommand("mceLink",i(t));this.showDialog=t;n.addMenuItem("link",{icon:"link",text:"Insert/edit link",shortcut:"Meta+K",onclick:i(t),stateSelector:"a[href]",context:"insert",prependToContext:!0})});